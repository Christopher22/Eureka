# Eureka

## Introduction

Even if the software "Robocode" seems on the first glance like a programming exercise for new software engineers, the tactical opportunities, complex solutions and demanding challenges on a second proves this assumption wrong. "Eureka" is the try to build a highly modular foundation for a "rational" agent which is able to survive even in demanding circumstances by being optimizable not only on compile time but improve itself during supervised training and unsupervised battles.

## Design

Eureka was not designed to be the best melee champion, victorious in every fight. The highly optimized robots nowadays being at the top of competitions seems to be rather excellent with their hard-wired logic. Just borrow their ideas to create a "Frankenbot", copying already proven ideas seems therefore rather boring. This bot should be different. It should have the ability to be flexible and adaptable for future use; suitable to be optimized for a 1-vs-1 exactly just like for melee battles or fight in teams. To achieve this goal of flexibility, two major concepts were used.

For adaptations on compile-time by the developer, Eureka was structured from the ground of according to well-tested design principles from the software development of the last years. With its complex inheritance structure mimicking the human anatomy, every functionality of the robot is clearly encapsulated: While the "Leg" controls the actual movement of the robot, the "Eye" handles the surveillance of other robots and detects them if there are nearby. In addition, the "Fist" is used to abstract the concepts and tactics of attacking an enemy. It is crucial to understand that none of these components are "intelligent" or "rational" at all. They "just" perform their key activities, and they should (hopefully) handle them optimal: The goal is to archive a high level of self-responsibility without an outer distance distracting them. Moreover, this allows to work and improve every part of the robot easily without the need of handling unforeseen side effects. As a downside, these high autonomy "sub-agents" requires an extensive synchronizing between the instances which goes far belong the capabilities of the robocode-way of handling events by overwriting functions. Instead of, the well-known Observer pattern is used for that purpose: By not only observing the "Brain" of Eureka but also sending own events towards it, all components get access to all other events happening, not regarding if there are generated from the system or the custom events the components may use. The resulting network, where every component is connected to every component in an asynchronous manner, shows obvious similarities with our human nervous system. The "Brain" as its manager has therefore not only the responsibility keeping the network running but also to generate the rational logic the robot might show during a battle.

For adaptations at runtime by artificial intelligence, the extensive learning features of Eureka comes into account. This mechanic is the outstanding feature of Eureka, in this complexity used by almost no other robots. First of all, Eureka is capable of training itself unsupervised during battles. To do so, it evaluates continuously the performance of its enemies and saves the results afterward. The gained information are used as heuristics in movement and attacking. While this tactic is well researched and used by other robots, Eureka combines it with its unique capability of being trained in a process of supervised learning, too. To do so, we need to have a look at the way the robots stores its parameters. These "constants", which determine the exact way the robot behave i.e. which distance is to be handled as "nearby" or which is the minimal distance the robot may move. All these are not stored on a per-component basis like everything else but are saved in the "Memory" of the robot together with the information, if the value is really constant or may be just in a specific range. The latter are the arguments which allow Eureka to optimize itself against special enemies on the one hand or battles in general. To do so, the robot is called outside of the battle: Given a specific number of rounds and a list of enemies, it will then start thousands of battles where it tests all permutations of its parameter regarding its own success measured by the score calculated by the engine using them. This brute-force-method guarantees that it will find not just a local optimum but the best solution of all, a human might not have seen before. The most successful set will afterward not only be stored and used in the next battles but will improve the heuristics for the performance of the enemies, too.

## Strategy in battle

The strategies of Eureka are well researched and already applied by other existing robots, except that there are enriched with the ability to be improved over time, rounds and battles. The overall goal is the create an agent, which seems to learn and work in a rational and reasonable manner. In consideration of the autonomy of the different components, it seems reasonable to have a first look at each of them. 

As an optimal strategy for movement during the battle, Eureka uses an adaption of the "Minimum Risk Movement". It is intuitively clear, that the best position in a battle is this where the chance of winning (and not only surviving, other than the name suggests) is the highest one. To find such a point without being too predictable, Eureka spawns a number of possible waypoints around itself in a random distance and evaluates them afterward. The distance towards the current point (because one should never stay at the same position), a number of robots nearby, their current level of energy and their performance in the past battles are the basis of the heuristics. This movement is an evolution of the concept of "Anti-Gravity Movement" implemented before in this robot: The usage of heuristics to move away from possible sources of danger leads to the commonly known problem of getting stuck in corners as the safest ways of a battlefield from a mathematical but not rational point of view. The new technique resolves that issue by enforcing a specific distance towards the borders. Moreover, positions directly before and behind the robot are forbidden for the sake of a nonlinear movement as protection against the predictions of advanced weapon systems. 

The gun of Eureka is implementing under the background of predictive shooting. If it is not aiming, its rotation is set to the direction of the robot itself. Unlike the spinning implemented in an early version, these rotation allows an immediately for enemies appearing in the area before the robot which is better covered with radar than the back. For shooting itself, the last known positions of an enemy get interpolated into the future the predict the best point to fire. The power of fire depends on the distance of the target, requiring the use of the secant function to find the sweet spot between the position and the speed of the bullet.

The radar is crucial for a robot like Eureka. Without a good overview of the battlefield, the tracking of robots over multiple turns and exact predictions of movement becomes rather difficult and error-prone. Even if a continuous turning of the radar would, therefore, be a valid naive approach, according to own experiments the performance seems not to be sufficient enough. Even if a rational agent has to focus on the environment all around, he needs a bias of focus towards the direction it is moving. Elsewise, the danger of colliding with another object or missing easy targets would simply be too high. To mimic this behavior, Eureka scans the 180 degrees before it twice as often as its back.

## Performance & Further work

The current performance of Eureka is not far as good as they might be. Besides the automatic optimization of the parameters, it would be rather crucial to put some effort in the optimisation of the math behind heuristics; a process not easily automatable.  A crucial part in increasing the performance would be the improvement of the gun towards a more advanced version. Nevertheless, it seems that the current performance is acceptable under the premise of building a robot for the experimentation with hand-written machine learning approaches. The next step would be even to evaluate the own order of events and reactions in comparison to the score to find an optimal reaction. In such a robot, any hard-coded algorithms would be necessary. In the current implementation of Eureka, the API and the data are ready for such an analysis and just waiting for an AI implementation in future - the battle for the throne have only just begun.